<Page
    x:Class="ClipBridgeShell_CS.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:helpers="using:ClipBridgeShell_CS.Helpers"
    xmlns:xaml="using:Microsoft.UI.Xaml"
    xmlns:l="using:WinUI3Localizer"
    mc:Ignorable="d"
    xmlns:ctk="using:CommunityToolkit.WinUI.Controls"
    xmlns:ui="using:CommunityToolkit.WinUI">
    <Page.Resources>
        <helpers:EnumToBooleanConverter x:Key="EnumToBooleanConverter" />
        <!-- 模仿 WinUI Gallery 的分组标题样式 -->
        <Style x:Key="GroupHeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            
        </Style>
    </Page.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- 固定页眉 -->
            <RowDefinition Height="*"/>
            <!-- 可滚动正文 -->
        </Grid.RowDefinitions>
        <!-- Row 0: 页眉（不随滚动），与内容同一中栏 -->
        <StackPanel Grid.Row="0"
              Padding="36,24,36,4">
              
              
            <StackPanel MaxWidth="1064">
            <TextBlock l:Uids.Uid="Shell_Settings.Text" 
               Style="{StaticResource TitleTextBlockStyle}"/>
            </StackPanel>
        </StackPanel>

        <ScrollViewer Grid.Row="1"
                      Padding="36,0,36,0"
                VerticalScrollMode="Auto"
                VerticalScrollBarVisibility="Auto"
                HorizontalScrollMode="Disabled"
                HorizontalScrollBarVisibility="Disabled"
                >
            <Border HorizontalAlignment="Stretch">
                <StackPanel x:Name="ContentArea"
                    MaxWidth="1064"
                    HorizontalAlignment="Stretch"
                    Spacing="{StaticResource SettingsItemSpacing}">
                    <TextBlock l:Uids.Uid="Settings_Personalization" Style="{StaticResource GroupHeaderTextStyle}" />
                    <StackPanel Margin="{StaticResource SmallTopBottomMargin}">
                        <TextBlock l:Uids.Uid="Settings_Theme" />
                        <!-- 主题 -->
                        <ctk:SettingsCard l:Uids.Uid="Settings_Theme" HeaderIcon="{ui:FontIcon Glyph=&#xE771;}" HorizontalAlignment="Stretch">
                            <ComboBox x:Name="ThemeCombo"
                                      Width="240"
                                      SelectionChanged="ThemeCombo_SelectionChanged">
                                <ComboBoxItem Tag="Default" l:Uids.Uid="Settings_Theme_Default"/>
                                <ComboBoxItem Tag="Light"   l:Uids.Uid="Settings_Theme_Light"/>
                                <ComboBoxItem Tag="Dark"    l:Uids.Uid="Settings_Theme_Dark"/>
                            </ComboBox>
                        </ctk:SettingsCard>
                    </StackPanel>

                <!-- 语言设置区块 -->
                <TextBlock l:Uids.Uid="Settings_LanguageHeader" />
                <StackPanel Margin="{StaticResource SmallTopBottomMargin}">
                    <ctk:SettingsCard l:Uids.Uid="Settings_LanguageCombo" HeaderIcon="{ui:FontIcon Glyph=&#xE8C1;}" HorizontalAlignment="Stretch">
                        <ComboBox x:Name="LanguageCombo"
                                  Width="240"
                                  SelectionChanged="LanguageCombo_SelectionChanged">
                            <ComboBoxItem Tag="en-US" l:Uids.Uid="Settings_Lang_English"/>
                            <ComboBoxItem Tag="zh-CN" l:Uids.Uid="Settings_Lang_Chinese"/>
                        </ComboBox>
                    </ctk:SettingsCard>

                    <Button Click="ResetSettings_Click" l:Uids.Uid="Settings_ResetButton"/>
                    <Button Content="Show LocalFolder Path" Click="ShowLocalFolder_Click" />
                    <!-- 用于显示应用文件夹路径，可删除 -->
                </StackPanel>

                <StackPanel Margin="{StaticResource SmallTopBottomMargin}">
                    <TextBlock l:Uids.Uid="Settings_About" Style="{ThemeResource SubtitleTextBlockStyle}" />
                </StackPanel>

                <StackPanel Margin="{StaticResource XSmallTopMargin}">
                    <TextBlock Text="{x:Bind ViewModel.VersionDescription, Mode=OneWay}" Style="{ThemeResource BodyTextBlockStyle}" />

                    <TextBlock
                    l:Uids.Uid="Settings_AboutDescription"
                    Margin="{StaticResource XSmallTopMargin}"
                    Style="{ThemeResource BodyTextBlockStyle}" />
                    <HyperlinkButton l:Uids.Uid="SettingsPage_PrivacyTermsLink" Margin="{StaticResource SettingsPageHyperlinkButtonMargin}" />
                </StackPanel>
            </StackPanel>
        </Border>
    </ScrollViewer>
    </Grid>
</Page>
